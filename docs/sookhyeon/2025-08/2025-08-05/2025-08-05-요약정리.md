# Ch3 효율적 쿼리

## Ch3-1. 인덱스 (Index)

### 개념
- 인덱스는 테이블의 **검색 속도를 향상**시키기 위한 데이터 구조.
- 책의 ‘찾아보기’와 유사. WHERE, JOIN, ORDER BY 절에서 자주 사용되는 **열(Column)**에 적용.

### 장점
- 데이터가 많을수록 성능 향상 효과 큼
- 빠른 검색과 정렬 가능

### 단점 및 주의사항
- **추가 저장공간** 소모
- **데이터 삽입/수정/삭제 시 오히려 느려질 수 있음**
- 너무 많은 인덱스는 비효율

### 인덱스 종류

| 종류 | 설명 | 특징 |
|------|------|------|
| 클러스터형 인덱스 (Clustered Index) | 테이블의 실제 데이터를 정렬하여 저장 | PRIMARY KEY 등, 테이블당 하나 |
| 보조 인덱스 (Secondary Index) | 데이터와 별도로 저장 | UNIQUE 제약 조건 시 자동 생성 가능, 여러 개 허용 |

### 예제

```sql
-- 인덱스 생성
CREATE INDEX idx_user_email ON users(email);

-- 인덱스 조회
SHOW INDEX FROM users;

-- 인덱스 삭제
DROP INDEX idx_user_email ON users;
```

---

## Ch3-2. 뷰 (View)

### 개념
- SELECT 결과를 마치 테이블처럼 다루는 **가상 테이블**
- 데이터를 저장하지 않음. 쿼리 캡슐화에 유용

### 장점
- 복잡한 쿼리를 간단히 표현
- 민감 정보 숨기기 가능 (보안적 이점)

### 주의사항
- 일부 뷰는 **수정 불가**
- 조인, 집계 포함 시 DML 제약 있음

### 예제

```sql
-- 뷰 생성
CREATE VIEW user_summary AS
SELECT id, name, email FROM users WHERE is_active = 1;

-- 뷰 사용
SELECT * FROM user_summary;

-- 뷰 삭제
DROP VIEW user_summary;
```

---

## Ch3-3. 조인 (JOIN)

### 개념
- 여러 테이블을 하나로 합치는 방식
- 관계형 데이터베이스의 핵심

### JOIN 종류

| 유형 | 설명 | NULL 포함 여부 | 활용 |
|------|------|------------|------|
| INNER JOIN | 공통 데이터만 결합 | X          | 일반적인 조인 |
| LEFT JOIN | 왼쪽 테이블 기준 모두 출력 | O          | 기준 테이블 보존 |
| RIGHT JOIN | 오른쪽 테이블 기준 모두 출력 | O          | |
| FULL JOIN | 둘 다 포함 (MySQL은 UNION 사용) | O          | |

### 예제

```sql
-- INNER JOIN
SELECT u.name, o.product_id
FROM users u
INNER JOIN orders o ON u.id = o.user_id;

-- LEFT OUTER JOIN
SELECT u.name, o.product_id
FROM users u
LEFT JOIN orders o ON u.id = o.user_id;

-- FULL OUTER JOIN (MySQL에서는 UNION으로 구현)
SELECT u.name, o.product_id
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
UNION
SELECT u.name, o.product_id
FROM users u
RIGHT JOIN orders o ON u.id = o.user_id;
```

---

## 전체 요약

| 항목 | 핵심 내용 | 쿼리 예시 | 주의사항 |
|------|----------|----------|-----------|
| **인덱스** | 검색 속도 향상 | `CREATE INDEX`, `SHOW INDEX` | DML(삽입,수정,삭제) 시 느려질 수 있음 |
| **뷰** | SELECT 쿼리 캡슐화 | `CREATE VIEW`, `DROP VIEW` | 수정 제한 가능성 있음 |
| **조인** | 다중 테이블 결합 | `JOIN`, `LEFT JOIN`, `UNION` | 조건 설정에 주의 |

---

# Ch4. MongoDB - NoSQL 

## NoSQL이란?

- **Not Only SQL**의 약자
- 관계형 DB와 다르게 다양한 구조(JSON, Key-Value 등)를 저장할 수 있음
- 대용량, 비정형 데이터, 빠른 확장성에 적합

---

## MongoDB 개요

- **Document-Oriented NoSQL DB**
- JSON 형태의 **document**를 기본 단위로 저장
- 계층 구조: `database → collection → document`

### MongoDB 특징

| 항목 | 설명 |
|------|------|
| 문서 중심 | JSON 구조로 데이터 저장 |
| 스키마 유연 | 컬럼 고정 X |
| 빅데이터 | 빠른 쓰기/읽기 |
| 인덱스, 정렬, 필터 | MySQL과 유사 기능 포함 |

---
