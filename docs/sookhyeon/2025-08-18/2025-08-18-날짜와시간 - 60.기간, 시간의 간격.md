# 날짜와 시간 라이브러리가 필요한 이유와 Duration, Period 정리

## 왜 날짜·시간은 생각보다 어려운가

**월 길이/윤년**: 월마다 길이가 다르고, 윤년 규칙(4의 배수는 윤년, 100의 배수는 평년, 400의 배수는 윤년)까지 반영해야 한다. 단순 뺄셈으로는 오답 발생.
**DST(일광절약시간)**: 특정 지역은 시계를 1시간 앞당기거나 늦추기 때문에 오차가 생긴다.
**타임존**: 세계는 수십 개의 타임존을 사용하며, 오프셋(+09:00 등)과 지역 규칙까지 고려해야 한다.

따라서 직접 계산 대신 **표준 라이브러리**를 사용해야 한다.

------------------------------------------------------------------------

## 자바 8+의 java.time 패키지

**LocalDate / LocalTime / LocalDateTime**: 타임존 없는 지역적 날짜·시간
**ZonedDateTime**: 타임존 포함, DST 자동 반영
**OffsetDateTime**: 오프셋만 포함
**Instant**: UTC 기준 시점(에포크 이후 초/나노초)

------------------------------------------------------------------------

## 기간/간격 표현: Period vs Duration

**Period**: 달력 단위(년/월/일) → "3개월 뒤 마감", "D-Day 100일"
**Duration**: 균일 단위(시/분/초/나노) → "90분", "라면 3분"

상황             타입       이유
---------------- ---------- ----------------
프로젝트 3개월   Period     달력 단위 반영
라면 3분         Duration   초 기반 계산

------------------------------------------------------------------------

## Period 예제

``` java
LocalDate start = LocalDate.of(2023, 1, 1);
LocalDate end   = LocalDate.of(2023, 4, 2);

Period p = Period.between(start, end); // 3개월 1일
System.out.printf("%d개월 %d일%n", p.getMonths(), p.getDays());
```

------------------------------------------------------------------------

## Duration 예제

``` java
LocalTime start = LocalTime.of(9, 0);
LocalTime end   = LocalTime.of(10, 0);

Duration d = Duration.between(start, end); // 1시간
System.out.printf("%d시간 %d분%n", d.toHours(), d.toMinutesPart());
```

------------------------------------------------------------------------

## 실무에서 주의할 점

1.  **3개월 → Period**, Duration 아님
2.  **DST**는 `ZonedDateTime` + `withZoneSameInstant` 활용
3.  **Instant**는 저장/교환/정확 비교용
4.  모든 클래스는 **불변 객체**

------------------------------------------------------------------------

## 실전 스니펫

### D-Day 구하기

``` java
LocalDate start = LocalDate.of(2024, 1, 1);
LocalDate goal  = LocalDate.of(2024, 11, 21);

Period calDiff = Period.between(start, goal);
long daysLeft  = ChronoUnit.DAYS.between(start, goal);

System.out.printf("남은 기간: %d년 %d개월 %d일%n", 
    calDiff.getYears(), calDiff.getMonths(), calDiff.getDays());
System.out.printf("디데이: %d일 남음%n", daysLeft);
```
