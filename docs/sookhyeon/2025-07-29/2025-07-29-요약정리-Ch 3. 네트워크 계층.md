## IP 주소 구성

IP 주소는 네트워크 주소와 호스트 주소로 이루어짐

- 개발 가능: 32bit IPv4 및 128bit IPv6
- 하위 계층과 MAC 주소의 구분:
  - MAC: 사용자가 가공 못함
  - IP: 사용자가 가공

---

## 클래스풀/클래스리스

| 클래스 | 카테고리 | 네트워크 주소 범위 | 호스트 주소 범위 | 예제 IP         |
|-----------|----------------|----------------------|---------------------|-------------------|
| A         | 0xxx           | 0.0.0.0 ~ 127.255.255.255 | 24bit              | 10.1.2.3          |
| B         | 10xx           | 128.0.0.0 ~ 191.255.255.255 | 16bit              | 172.16.5.4        |
| C         | 110x           | 192.0.0.0 ~ 223.255.255.255 | 8bit               | 192.168.0.1       |

- 이때 보관은 “다음 IP 대분을 표현” 형식
- 보관: CIDR 표기구 (ex. 192.168.0.1/24)

---

## 서브넷 마스크 & AND 연산

- 서브넷 마스크: IP 주소 상에서 네트워크 주소는 1, 호스트 주소는 0으로 이루어진 비트열

```java
String ip = "192.168.100.103";   // 네트워크 주소 + 호스트 주소
String mask = "255.255.255.0";   // CIDR /24 범위 중 네트워크
```

- 네트워크 주소가 결정되는 것은 `AND`
  - IP: 192.168.100.103 => 11000000.10101000.01100100.01100111
  - Mask: 255.255.255.0 => 11111111.11111111.11111111.00000000
  - Result => 192.168.100.0

---

## IP 주소 분류

### 공인 IP 과 사설 IP

| 모드 | 설명 |
|--------|---------------------------|
| 공인 IP | 인터넷에서 사용하는 고유 주소 |
| 사설 IP | 사설 네트워크 내에서 사용 |

- 사설 대역:
  - 10.0.0.0/8
  - 172.16.0.0/12
  - 192.168.0.0/16

### NAT (공인 <-> 사설)
- 사설 IP 주소를 공인 IP로 변환
- IP 불허 문제 해결 목적

---

## 정적 IP vs 동적 IP

- 정적 IP: 귀정되어 되는 IP
- 동적 IP: DHCP 서버가 입수 후 일정 시간 가지고 거절

### DHCP 프로토콜

```bash
$ nmtui   # 네트워크 설정 시 사용
```

---

## 라우팅 기능

### 라우터 & 라우팅

- 라우터: 파크의 가지 건강을 고려해 차지 가능한 경로 선택

### 로컬 라우팅 테이블

| 목적지 | 서브넷 마스크 | 갈 게이트웨이 | 인터페이스 | 메트릭 |
|-----------|------------------|-------------|--------------|----------|
| 192.168.2.0 | 255.255.255.0 | 192.168.2.1 | eth0         | 30       |

- 매칭: 로컬 IP가 또는 CIDR와 일치 하는 경우 더 긴 CIDR 로 구도
- 디포르트 라우트: 0.0.0.0/0 (일치하는 경우가 없을 때)

### 라우팅 테이블 확인 방법

```bash
$ ip route
$ route -n
```

### 라우팅 테이블 설정

```bash
# 정적 라우트
$ ip route add 192.168.1.0/24 via 192.168.0.1 dev eth0

# 디포르트 라우트
$ ip route add default via 192.168.0.1 dev eth0
```

### 라우팅 프로토콜

- IGP (Interior): RIP, OSPF
- EGP (Exterior): BGP
