## Ch 6. 파일 시스템

### 파일과 디렉터리
- 파일과 디렉터리(폴더)를 관리하는 커널의 한 부분
- 다양한 파일 시스템이 있고, 여러 파일 시스템을 동시에 사용할 수 있음

파일(file)
- 보조기억장치의 의미있는 정보의 집합
- 구성요소
  - 이름
  - 실행하기 위한 정보
  - 부가 정보 = 메타데이터 / 속성
    - 유형 (확장자)
    - 크기
    - 생성 날짜
    - 마지막 접근 날짜
    - 마지막 수정 날짜
    - 생성자
    - 소유자
    - 위치

**블록(block)** : 파일(+ 디렉토리) 접근 단위
- 섹터 단위로 접근하지 않음

디렉토리 (계층/트리 구조) - 경로
- 루트 디렉터리 / 최상위 폴더 ( / )
- 절대 경로와 상대 경로
  - 절대 경로 : 최상위 폴더에서부터 현재 파일에 이르기까지의 전체 경로
  - 상대 경로 : 현재 경로를 기반으로 한 파일의 경로
> . : 현재 경로<br>
> .. : 상위 경로<br>
> ~ : 홈 디렉토리(기본 경로, 현재 로그인된 유저가 기본으로 사용하는 경로)

- 많은 운영체제는 **디렉터리**를 **특별한 파일과 동일하게 간주**한다.
- 디렉터리 구성 정보
  - 파일 이름
  - 위치를 유추할 수 있는 정보
  - (파일 속성) - 파일 시스템의 종류에 따라서 명시하는 경우도 있음

### 파일 시스템
- 파일과 디렉터리(폴더)를 관리하는 커널의 한 부분
- 다양한 파일 시스템이 있고, 여러 파일 시스템을 동시에 사용할 수 있음

- 보조기억장치 하나에 단일한 파일 시스템이 사용되는 것이 아니다
- 파티셔닝(partitioning) : 보조기억장치의 영역을 구획(어떤 공간을 여러 개의 작은 부분으로 나누거나 구분하는 것)하는 작업
  - 파티션(partition) : 보조기억장치에서 구획한 영역

- 포매팅(format + ing) : 파일 시스템을 만드는 작업

- 마운트 (mount)
  - 파일 시스템에 접근할 경로 결정
  - 파일 시스템을 다른 파일 시스템에 편입

연속적으로 블록을 할당할 경우 : 외부 단편화 발생

**FAT 기반 파일 시스템** : FAT(File Allocation Table, 메모리에 캐시되어 있음)를 활용하는 파일 시스템 - USB, DB, MS-DOS 같은 저용량 저장장치
파티션

| 예약 영역 | FAT 영역 | 루트 디렉터리 영역 | 데이터 영역 |
| --- | --- | --- | --- |

- 저용량 보조기억장치용 파일 시스템으로 이용
  - USB 메모리
  - SD 카드
- 디렉터리 엔트리에 파일 속성 표현

| 파일 이름 | 확장자 | 속성 | 예약 영역 | 생성 시간 | 마지막 접근 시간 | 마지막 수정 시간 | 시작 블록 | 파일 크기 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |

**아이노드 기반 파일 시스템** : 아이노드(i-node)라는 **색인 블록**(Index Block, 이 파일이 현재 어떤 블록에 할당되어 있는지에 대한 정보를 한 곳에 모아놓은 특별한 블록)을 활용한 파일 시스템<br>
아이노드를 사실상 파일의 모든 것을 담고 있다
> Index Block, 줄여서 i-node

파티션 내 아이노드 영역

| 예약 영역 | i-node 영역 | 데이터 영역 | 
| --- | --- | --- | 

아이노드를 사용량이 100%로 찼을 경우
-> 용량이 남아 있어도 파일 생성 불가

**기타 파일 시스템 특성 정리**<br>
NTFS
- 윈도우 운영체제에서 주로 사용되는 파일 시스템
APFS
- macOS, iOS, watchOS, tvOS에서 주로 사용되는 파일 시스템
ext2, ext3, ext4, xft
- 리눅스 운영체제에서 주로 사용되는 파일 시스템


저널링(파일을 얼마나 안전하게 활용할 수 있는지, 얼마나 잘 복수할 수 있는지) 파일 시스템(journaling file system)
- 파일 시스템에 크래쉬가 발생했을 때 빠르게 복구하기 위한 방법
  1. 작업 직전 파티션의 로그 영역에 로그를 남긴다.
  2. 로그를 남긴 후 작업을 수행한다.
  3. 작업을 끝났다면 로그를 삭제한다.

| 예약 영역 | 로그 영역 | i-node 영역 | 데이터 영역 | 
| --- | --- | --- | --- |
